<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<title>Testing Cookies</title>
		<script type="text/javascript" src="../externals/jquery-1.3.1.min.js"></script>
		<script type="text/javascript" src="jquery.cookies.js"></script>
	</head>
	<body>
		<h1>Object Oriented Javascript Cookie Handling Library with jQuery bindings</h1>
		<h2>FireUnit Test Suite</h2>
		<p>There is no content of value in this document.  Open in Firefox installation which has Firebug and FireUnit installed.  <em>Open Firebug and click the 'test' tab to review tests.</em></p>

		<div>
			<form id="testform" action="" method="post">
					<p><input type="text" name="testCookify" id="testCookify" value="" /></p>
					
					<p><input type="text" name="testCookieFill" id="testCookieFill" value="" /></p>
					
					<p><input type="text" name="testCookieBind" id="testCookieBind" value="" /></p>
			</form>
		</div>


		<script type="text/javascript">
			( function()
			{
				if( window.fireunit )
				{
					( function( fireunit )
					{
					//Testing presence of namespaces
						fireunit.compare( typeof window.jaaulde, 'object', 'Is window.jaaulde namespace loaded?' );
						fireunit.compare( typeof window.jaaulde.utils, 'object', 'Is window.jaaulde.utils namespace loaded?' );
						fireunit.compare( typeof window.jaaulde.utils.cookies, 'object', 'Is window.jaaulde.utils.cookies loaded?' );
						fireunit.compare( typeof window.jQuery, 'function', 'Is window.jQuery loaded?' );
						fireunit.compare( typeof window.$, 'function', 'Is window.$ loaded?' );
						fireunit.compare( window.jQuery, window.$, 'Is window.jQuery aliased as window.$?' );
					//Check that jQuery extension-ization took place
						fireunit.compare( typeof $.cookies, 'object', 'Is cookies loaded in under jQuery?' );
					//Check presence of public methods under own namespace and jQuery
						fireunit.compare( typeof window.jaaulde.utils.cookies.get, 'function', 'Is get() method present in namespace?' );
						fireunit.compare( typeof $.cookies.get, 'function', 'Is get() method present in jQ?' );
						fireunit.compare( typeof window.jaaulde.utils.cookies.set, 'function', 'Is set() method present in namespace?' );
						fireunit.compare( typeof $.cookies.set, 'function', 'Is set() method present in jQ?' );
						fireunit.compare( typeof window.jaaulde.utils.cookies.filter, 'function', 'Is filter() method present in namespace?' );
						fireunit.compare( typeof $.cookies.filter, 'function', 'Is filter() method present in jQ?' );
						fireunit.compare( typeof window.jaaulde.utils.cookies.del, 'function', 'Is del() method present in namespace?' );
						fireunit.compare( typeof $.cookies.del, 'function', 'Is del() method present in jQ?' );
						fireunit.compare( typeof window.jaaulde.utils.cookies.test, 'function', 'Is test() method present in namespace?' );
						fireunit.compare( typeof $.cookies.test, 'function', 'Is test() method present in jQ?' );
						fireunit.compare( typeof window.jaaulde.utils.cookies.setOptions, 'function', 'Is setoptions() method present in namespace?' );
						fireunit.compare( typeof $.cookies.setOptions, 'function', 'Is setoptions() method present in jQ?' );
					//Test for jQ extension methods
						fireunit.compare( typeof $.fn.cookify, 'function', 'Is cookify() jQ extension method present?' );
						fireunit.compare( typeof $.fn.cookieFill, 'function', 'Is cookieFill() jQ extension method present?' );
						fireunit.compare( typeof $.fn.cookieBind, 'function', 'Is cookieBind() jQ extension method present?' );

				//Start into real testing of the library

					//Does this browser accept cookies?
						fireunit.compare( true, $.cookies.test(), 'Does this browser accept cookies?' );
					//Does getting a cookie which has not been set return null
						fireunit.compare( null, $.cookies.get( 'neverbeenset' ), 'Does get() of a non-existant cookie return null?' );
					//Does a cookie always return as set?
						var testcookielist = {
							test1: 'value1',
							test2: 'name=value&amp;name1=value1&amp;name2=value2',
							test3: 'I am a long cookie value hyubufnhvjsghdvjbdhjvbjdsbvhjgdbhjgjknvhdjlknuvhjakvhgbjvhjklghvyabguhragagfrtyefghjgbhgbhjbhgj,dhgbvhjkhfkjfkht5465rt7^$%%$%#%RYgdhefd',
							test4: 'I am a very long cookie value hyubufnhvjsghdvjbdhjvbjdsbvhjgdbhjgjknvhdjlknuvhjakvhgbjvhjklghvyabguhragagfrtyefghjgbhgbhjbhgj,dhgbvhjkhfkjfkht5465rt7^$%%$%#%RYgdhefdbhufghhgf65t4rt7676^^6546fygshgdgdvut^%$5erfgUUhy8761dbhjfbhvcdszX%^%$%$%DFGHGYUTYR%$EDRFVFDcghvfdxcvjhbvcfgxdsxcghv hyubufnhvjsghdvjbdhjvbjdsbvhjgdbhjgjknvhdjlknuvhjakvhgbjvhjklghvyabguhragagfrtyefghjgbhgbhjbhgj,dhgbvhjkhfkjfkht5465rt7^$%%$%#%RYgdhefdbhufghhgf65t4rt7676^^6546fygshgdgdvut^%$5erfgUUhy8761dbhjfbhvcdszX%^%$%$%DFGHGYUTYR%$EDRFVFDcghvfdxcvjhbvcfgxdsxcghv'
						};
						for( name in testcookielist )
						{
							$.cookies.set( name, testcookielist[name] );
							fireunit.compare( $.cookies.get( name ), testcookielist[name], 'Did running set() and get() methods on cookie, ' + name + ', return proper value?' );
						}
					//Do cookies get deleted properly?
						for( name in testcookielist )
						{
							$.cookies.del( name );
							fireunit.compare( null, $.cookies.get( name ), 'Did running del() method on cookie, ' + name + ', remove the value?' );
						}
					//Does del() remove all cookies when passed true as first param?
						for( name in testcookielist )
						{
							$.cookies.set( name, testcookielist[name] );
						}
						$.cookies.del( true );
						fireunit.compare( 0, document.cookie.length, 'Did running del() method for all cookies empty the cookie string?' );

					//Test filter
						var testcookielist = {
							test1: 'value1',
							testMatch2: 'value2',
							matchTest3: 'value3',
							test4: 'value4'
						};
						for( name in testcookielist )
						{
							$.cookies.set( name, testcookielist[name] );
						}
						var filterRegex = new RegExp( 'match', 'i' );
						var matchedCookies = $.cookies.filter( filterRegex );
						fireunit.compare( typeof matchedCookies,'object', 'Did filter() get object?' );
						var cookieCount = 0;
						for( var name in matchedCookies )
						{
							cookieCount++;
						}
						fireunit.compare( 2, cookieCount, 'Did filter get proper number of cookies' );
						for( var name in matchedCookies )
						{
							fireunit.ok( ( name === 'testMatch2' || name === 'matchTest3' ), 'Did filter get back cookie of right name?' );

							fireunit.ok( ( matchedCookies[name] === 'value2' || matchedCookies[name] === 'value3' ), 'Did filter get back cookie with right value?' );
						}
						for( name in testcookielist )
						{
							$.cookies.del( name );
						}

					//Test cookify
						$( '#testCookify' ).attr( 'value', 'Value for cookify' ).cookify();
						fireunit.compare( 'Value for cookify', $.cookies.get( 'testCookify' ), 'Does cookify() method set correct value?' );
						$.cookies.del( 'testCookify' );

					//Test cookieFill
						$.cookies.set( 'testCookieFill', 'Value for cookie fill' );
						$( '#testCookieFill' ).cookieFill();
						fireunit.compare( 'Value for cookie fill', $( '#testCookieFill' ).attr( 'value' ), 'Does cookieFill() method fill correct field with correct value?' );
						$.cookies.del( 'testCookieFill' );

					//Test cookie bind
						$.cookies.set( 'testCookieBind', 'First value for cookie bind' );
						$( '#testCookieBind' ).cookieBind();
						fireunit.compare( 'First value for cookie bind', $( '#testCookieBind' ).attr( 'value' ), 'Does cookieBind() method fill correct field with correct value?' );
						$( '#testCookieBind' ).attr( 'value', 'Second value for cookie bind' ).change();
						fireunit.compare( 'Second value for cookie bind', $.cookies.get( 'testCookieBind' ), 'Does cookieBind() method set correct cookie when field changes?' );
						$.cookies.del( 'testCookieBind' );

					//Testing complete
						fireunit.testDone();

					} )( window.fireunit );
				}
			} )();
		</script>
	</body>
</html>